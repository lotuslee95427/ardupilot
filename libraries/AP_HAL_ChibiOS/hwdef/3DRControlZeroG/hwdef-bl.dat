# 这是3DR Control Zero OEM H7飞控板的bootloader硬件定义文件

# 定义MCU类型和具体型号
# 使用STM32H7系列的STM32H743处理器
MCU STM32H7xx STM32H743xx

# USB设备配置
# 设置USB供应商ID和产品ID
USB_VENDOR 0x26ac
USB_PRODUCT 0x1124
USB_STRING_MANUFACTURER "3DR"  # USB制造商字符串
USB_STRING_PRODUCT "CZOEMrevG" # USB产品名称字符串

# 晶振配置
OSCILLATOR_HZ 24000000  # 外部晶振频率为24MHz
define STM32_HSE_BYPASS # 启用HSE旁路模式
define SMPS_EXT         # 使用外部开关电源

# 固件加载配置
APJ_BOARD_ID 1124      # 开发板ID,用于固件校验

# Flash存储配置
FLASH_SIZE_KB 2048     # Flash总大小为2MB
FLASH_RESERVE_START_KB 0  # bootloader从Flash起始位置开始
FLASH_BOOTLOADER_LOAD_KB 128  # 固件加载位置在128KB处

# LED配置
PB11 LED_BOOTLOADER OUTPUT  # bootloader状态指示LED

# 电源控制
PH5 VDD_1V2_CORE_EN OUTPUT HIGH  # 1.2V核心电压使能引脚

# 状态LED配置(三个LED组合可输出白光)
PB1 LED_ACTIVITY OUTPUT
PB3 LED_ACTIVITY2 OUTPUT
# PB11 LED_ACTIVITY3 OUTPUT

define HAL_LED_ON 0  # 定义LED点亮电平为低电平

# 串口顺序配置(包括USB)
SERIAL_ORDER OTG1 USART2

# USART2串口引脚定义
PD5 USART2_TX USART2   # 发送引脚
PD6 USART2_RX USART2   # 接收引脚
PD3 USART2_CTS USART2  # 清除发送引脚
PD4 USART2_RTS USART2  # 请求发送引脚

# USB引脚定义
PA11 OTG_FS_DM OTG1    # USB D-引脚
PA12 OTG_FS_DP OTG1    # USB D+引脚

# 调试接口引脚定义
PA13 JTMS-SWDIO SWD    # SWD数据线
PA14 JTCK-SWCLK SWD    # SWD时钟线

# 传感器片选引脚定义(确保bootloader中为高电平)
PC2  ICM_20602_CS CS        # ICM20602 IMU片选
PD7  BARO_CS CS             # 气压计片选
PD10 FRAM_CS CS SPEED_VERYLOW NODMA  # FRAM存储器片选,低速模式
PE15 ICM_20948_CS CS        # ICM20948 IMU片选
PF6  BMI088_ACCEL_CS CS     # BMI088加速度计片选
PF10 BMI088_GYRO_CS CS      # BMI088陀螺仪片选
#PG9 EXTERNAL CS            # 外部设备片选(未启用)
